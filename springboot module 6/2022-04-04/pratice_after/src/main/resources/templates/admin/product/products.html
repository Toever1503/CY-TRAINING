<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="/component/component :: head"/>
<body>
<div th:replace="/component/component :: JQueryToast"/>
<div class="container p-4">
    <div>
        <a href="/admin/products/add" class="btn btn-primary">Create new</a>
        <a href="/admin" class="btn btn-primary ml-2">Admin Dashboard</a>
        <a href="/admin/products" class="btn btn-primary ml-2">Refresh</a>
    </div>

    <div class="d-flex">
        <form action="/admin/products/search" class="mt-2 mb-2" style="width: 400px">
            <div class="input-group">
                <button class="btn btn-outline-primary mr-2">Search</button>
                <input type="text" class="form-control" required name="q" placeholder="enter product name...">
            </div>
        </form>
        <form action="/admin/products/filter" class="ml-4 mt-2 mb-2" style="width: 400px">
            <div class="input-group">
                <button class="btn btn-outline-primary mr-2">Filter</button>
                <select class="form-control" id="productCat" name="catId">
                    <option th:each="cat : ${listCats}" th:value="${cat.id}" th:text="${cat.catName}"/>
                </select>
            </div>
        </form>
    </div>
    <table class="table table-hover table-bordered text-center">
        <thead class="table-info">
        <tr>
            <th>Product ID</th>
            <th>Product Name</th>
            <th>Price</th>
            <th>Category</th>
            <th>Image</th>
            <th>Created By</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
            <tr th:each="product : ${listProducts.getContent()}">
                <td th:text="${product.id}"/>
                <td th:text="${product.name}"/>
                <td th:text="${product.price}"/>
                <td th:text="${product.category != null ? product.category.catName: '-' }"/>
                <td><img th:src="${product.image}" height="50" width="50" alt=""></td>
                <td th:text="${product.createdUser.username}"></td>
                <td>
                    <div>
                        <a th:href="|/admin/products/edit/${product.id}|" class="btn btn-primary">Edit</a>
                        <a th:href="|/admin/products/delete/${product.id}|" class="btn btn-danger">Delete</a>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="page m-auto mt-3">
        <ul class="pagination">
            <li class="page-item" th:if="${!listProducts.isFirst()}"><a class="page-link"
                                                                    th:href="${'?page='+ (listProducts.getNumber()-1)}">Previous</a>
            </li>
            <li th:class="|page-item ${pageIndex == listProducts.getNumber() ? 'active' : ''}|"
                th:each="pageIndex : ${#numbers.sequence( 0, __${listProducts.getTotalPages()-1}__)}"><a
                    class="page-link" th:href="|?page=${pageIndex}|" th:text="${pageIndex}"></a></li>
            <li class="page-item" th:if="${!listProducts.isLast()}"><a class="page-link"
                                                                   th:href="${'?page='+(listProducts.getNumber()+1)}">Next</a>
            </li>
        </ul>
    </div>
</div>

</body>
</html>