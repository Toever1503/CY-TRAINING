<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Latest compiled JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>

    <button id="checkout-now">Checkout</button>
    <!-- The Modal checkout -->
    <div class="modal fade" id="form-checkout">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Checkout</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <form id="checkout-form" class="p-2">
                    <input type="text" class="d-none" name="id">
                    <div class="mb-3 mt-3">
                        <label for="cusName">Fullname:</label>
                        <input type="text" class="form-control" required id="cusName" placeholder="Enter your phone"
                            name="cusName">
                    </div>
                    <div class="mb-3 mt-3">
                        <label for="fullName">Phone:</label>
                        <input type="text" pattern="0[\d]{9}" title="Phone invalid!" class="form-control" required
                            id="fullName" placeholder="Enter your phone" name="phone">
                    </div>
                    <div class="mt-3">
                        <label for="detail">Street:</label>
                        <input type="text" class="form-control" required id="detail" placeholder="Enter your street"
                            name="detail">
                    </div>
                    <div class="address d-flex">
                        <div class="mb-3 mt-3 col-4">
                            <label for="provinceId">City:</label>
                            <select class="form-control" required name="provinceId">
                                <option value="">Choose City</option>
                                <option value="1">1</option>
                            </select>
                        </div>
                        <div class="m-3 col-3">
                            <label for="districtId">District:</label>
                            <select class="form-control" required name="districtId">
                                <option value="">Choose District</option>
                                <option value="1">1</option>
                            </select>
                        </div>
                        <div class="mb-3 mt-3 col-4">
                            <label for="wardId">Ward:</label>
                            <select class="form-control" required name="wardId">
                                <option value="">Choose Ward</option>
                                <option value="1">1</option>
                            </select>
                        </div>
                    </div>



                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary" id="btn-action">Checkout</button>
                        <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    <script>
        $('#checkout-now').click(function () {
            $('#form-checkout').modal('show');
        });

        $('#checkout-form').submit(e => {
            e.preventDefault();
            const formData = new FormData(e.target);
            console.log(JSON.stringify(formData));
            $.ajax({
                url: 'http://localhost:8080/checkout',
                type: 'POST',
                data: formData,
                contentType: false,
                processData: false,
                success: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    alert('Error occurred! Page will be reloaded.');
                }
            })
        });
    </script>
    <!-- The Modal -->
    <div class="modal fade" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header">
                    <h4 class="modal-title">Invoice Information</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <h5
                        style="text-align: center; border-bottom: 1px solid gainsboro; color: turquoise; padding-bottom: 5px;">
                        Thanks for buying <br> Your order is processing, we will notice to you later!</h5>
                    <p>
                        <strong>Invoice ID:</strong> <span id="invoice-id"></span>
                    </p>
                    <p>
                        <strong>Customer Name:</strong> <span id="customer-name"></span>
                    </p>
                    <p>
                        <strong>Customer Phone:</strong> <span id="customer-phone"></span>
                    </p>
                    <p>
                        <strong>Customer Address:</strong> <span id="customer-address"></span>
                    </p>
                    <p>
                        <strong>Invoice Date:</strong> <span id="invoice-date"></span>
                    </p>
                    <p>
                        <strong>Invoice Status:</strong> <span id="invoice-status"></span>
                    </p>
                    <p>
                        <strong>Products:</strong> <br>
                    <table
                        style="text-align: center; border-collapse: collapse; width: 100%;border: 1px solid gainsboro; ">
                        <thead style="width: 100%;     background-color: bisque;">
                            <tr style=" display:grid;grid-template-columns: 25% 25% 25% 25%">
                                <th style="border: 1px solid gainsboro">Name</th>
                                <th style="border: 1px solid gainsboro">Quantity</th>
                                <th style="border: 1px solid gainsboro">Price</th>
                                <th style="border: 1px solid gainsboro">SubTotal</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr style=" display:grid;grid-template-columns: 25% 25% 25% 25%">
                                <td style="border: 1px solid gainsboro">1</td>
                                <td style="border: 1px solid gainsboro">2</td>
                                <td style="border: 1px solid gainsboro">3</td>
                                <td style="border: 1px solid gainsboro">4</td>
                            </tr>
                        </tbody>
                    </table>
                    </p>
                    <p>
                        <strong>Total Price:</strong> <span id="invoice-total"></span>
                    </p>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">
        Open modal
    </button>
</body>

</html>